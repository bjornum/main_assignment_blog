{% extends "base.html" %} {% block title %}Home{% endblock %} {% block content
%}
<form id="searchForm" class="search-input-container">
  <div class="search-wrapper">
    <span class="search-icon">üîç</span>
    <input
      type="text"
      id="searchInput"
      placeholder="Search posts..."
      class="search-input"
    />
  </div>
</form>

<h2>All Blog Posts</h2>

{% for post in posts %}
<article class="post" data-title="{{ post['title'] | lower }}">
  <img
    src="https://picsum.photos/id/{{ 100 + post['id'] }}/800/300"
    alt="Post Image"
  />
  <h3>{{ post['title'] }}</h3>
  <small>Published: {{ post['pub_date'] }}</small>
  <p>{{ post['content'][:150] }}...</p>
  <a href="{{ url_for('main.post_detail', post_id=post['id']) }}">Read more</a>
</article>
{% else %}
<p>No blog posts yet.</p>
{% endfor %}

<script>
  const searchInput = document.getElementById("searchInput");
  const posts = document.querySelectorAll(".post");

  searchInput.addEventListener("input", function () {
    const query = this.value.toLowerCase();

    posts.forEach((post) => {
      const title = post.dataset.title;
      if (title.includes(query)) {
        post.style.display = "";
      } else {
        post.style.display = "none";
      }
    });
  });
</script>
{% endblock %}
